{
  "comments": [
    {
      "key": {
        "uuid": "a65c5a51_20fb2466",
        "filename": "webrtc/api/stats/rtcstats_objects.h",
        "patchSetId": 2
      },
      "lineNbr": 280,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "Place these fields in the same order as in the spec\nhttp://rawgit.com/w3c/webrtc-stats/master/webrtc-stats.html#dom-rtcmediastreamtrackstats.\n\nThe order doesn\u0027t matter but I\u0027d like to keep this file as close to 1:1 with the spec as possible :) (We\u0027re missing a few recently added members but other than that this file looks more or less like the spec.)\n\nThe stats are automatically surfaced to javascript in the chromium repo. In order not to expose new stats to the web platform without a corresponding chromium repo CL a whitelist has to be updated or else the [platform]_chromium_rel_ng chromium repo bots will fail on encountering non-whitelisted stats in a call between two tabs. I made the change, wait for this to land: https://chromium-review.googlesource.com/c/618574. (These bots can manually be added to run with this webrtc repo CL if you like.)",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2558863f_8f35cb62",
        "filename": "webrtc/api/stats/rtcstats_objects.h",
        "patchSetId": 2
      },
      "lineNbr": 280,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "OK, reordered. Thanks for taking care of the whitelist. I\u0027ll wait on that before landing this.",
      "parentUuid": "a65c5a51_20fb2466",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "dfd90f59_b9977f55",
        "filename": "webrtc/common_types.h",
        "patchSetId": 2
      },
      "lineNbr": 374,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "Spec link here too would be nice.",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "88d41cc8_c1ccdbeb",
        "filename": "webrtc/common_types.h",
        "patchSetId": 2
      },
      "lineNbr": 374,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "dfd90f59_b9977f55",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f89347fb_0a86bba8",
        "filename": "webrtc/modules/audio_coding/neteq/neteq_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "We\u0027re relying on StatisticsCalculator, I don\u0027t think NetEqImpl::lifetime_stats_ is used and can be removed?",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b2e25293_d488a944",
        "filename": "webrtc/modules/audio_coding/neteq/neteq_impl.cc",
        "patchSetId": 2
      },
      "lineNbr": 385,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Good catch. Done.",
      "parentUuid": "f89347fb_0a86bba8",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eca2ba43_5446417e",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.cc",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "Out of curiosity, is this perhaps the same thing as concealedAudibleSamples?\nhttps://github.com/w3c/webrtc-stats/issues/202 (proposed but not added to the spec and issue went stale)",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d64b9bb1_e6810110",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.cc",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Yes, it looks like it is. I guess the difference between concealedSamples and concealedAudibleSamples would be including the ExpandedNoiseSamples below.",
      "parentUuid": "eca2ba43_5446417e",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3bbae3d_7ec17ad9",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.cc",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1122982
      },
      "writtenOn": "2017-08-18T11:40:11Z",
      "side": 1,
      "message": "That is correct. Is there anything we can do to get that issue moving again (unrelated to this CL)?",
      "parentUuid": "d64b9bb1_e6810110",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8f4c0bb3_dad1473b",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.cc",
        "patchSetId": 2
      },
      "lineNbr": 155,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-18T12:03:45Z",
      "side": 1,
      "message": "I could give it another push and create a pull request, get the discussion around it going. I can set up another meeting with Varun. It\u0027s on my todo list but I\u0027m currently working on RTP Media API stuff.",
      "parentUuid": "e3bbae3d_7ec17ad9",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8466c117_96b9bd02",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.h",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "This might be a tricky question, but the webrtc spec has a concept of a MediaStream and a MediaStreamTrack that is a bit different than our meaning of a \"audio stream\". A MediaStream is simply a collection of MediaStreamTracks, whereas here a stream is something which is receiving media. Is an audio MediaStreamTrack the same thing as an audio stream here?\n\nMy concern is what happens if a track jumps between streams. Does the track\u0027s samples counter (corresponding MediaStreamTrackStats.totalSamplesReceived, etc) keep increasing or is the samples counter replaced by a different \"stream\u0027s\" GetLifetimeStatistics?\n\nI\u0027m guessing this is correct but hard to say without more knowledge of webrtc codebase.",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5a176ed9_7c8ff19c",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.h",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "I\u0027ll try digging into the code a bit/asking around.",
      "parentUuid": "8466c117_96b9bd02",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "13ae0770_f263d563",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.h",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1122982
      },
      "writtenOn": "2017-08-18T11:40:11Z",
      "side": 1,
      "message": "FWIW, I have no idea if/how NetEq instances can jump around between MediaStreams.",
      "parentUuid": "5a176ed9_7c8ff19c",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "06d8a6f9_817ea0dd",
        "filename": "webrtc/modules/audio_coding/neteq/statistics_calculator.h",
        "patchSetId": 2
      },
      "lineNbr": 101,
      "author": {
        "id": 1132136
      },
      "writtenOn": "2017-08-23T19:53:24Z",
      "side": 1,
      "message": "This is the same issue I was concerned about. First, some clarification on what the different stream/track things are:\n\n1. MediaStream: a collection of MediaStreamTracks that are synchronized. Practically speaking, all we support is lip sync between one video track and one audio track.\n2. MediaStreamTrack: a handle to a stream of audio or video that the application can connect to an \u003caudio\u003e or \u003cvideo\u003e tag for playout.\n3. \"audio stream\" in this level of code: An audio RTP stream, meaning all packets with a specific SSRC identifier.\n\nIt may be uncommon, but it IS possible for a MediaStreamTrack to be fed by different RTP streams in its lifetime. Endpoints may switch to a different SSRC (meaning new RTP stream, new voe::Channel, and a new instance of NetEq) for various reasons, such as the clock rate being changed, or audio being sourced from a different endpoint upstream.\n\nWhen this happens, I don\u0027t think it would be correct for the MediaStreamTrackStats to reset to 0. I was talking to hbos@ about this on a different bug (b/64413607). My idea was to calculate/store the stats in RemoteAudioSource, which is an object that corresponds to a track instead of an RTP stream. To do this with concealedSamples, we\u0027d need to add a boolean \"concealed\" flag to the AudioFrame class, and to AudioSinkInterface::Data (copied here: https://cs.chromium.org/chromium/src/third_party/webrtc/voice_engine/channel.cc?dr\u003dCSs\u0026l\u003d664). RemoteAudioSource would intercept audio data and calculate stats via the \"raw sink\" interface. That seems doable.",
      "parentUuid": "13ae0770_f263d563",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "afbf98b2_44751e28",
        "filename": "webrtc/pc/rtcstatscollector.cc",
        "patchSetId": 2
      },
      "lineNbr": 431,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "nit: Move to above |total_samples_duration| to have an order more similar to the spec.",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a5128546_480b05f8",
        "filename": "webrtc/pc/rtcstatscollector.cc",
        "patchSetId": 2
      },
      "lineNbr": 431,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "afbf98b2_44751e28",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b6fdfa70_9b723507",
        "filename": "webrtc/stats/rtcstats_objects.cc",
        "patchSetId": 2
      },
      "lineNbr": 353,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "Put RTCMediaStreamTracKStats, RTCStats, \"track\", on the same first line.\n\"git cl format .\" will mess with this.",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ecbeb03_8e68891e",
        "filename": "webrtc/stats/rtcstats_objects.cc",
        "patchSetId": 2
      },
      "lineNbr": 353,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Done. Also added directives to disable clang format on this block.",
      "parentUuid": "b6fdfa70_9b723507",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "03272744_4dd6acce",
        "filename": "webrtc/stats/rtcstats_objects.cc",
        "patchSetId": 2
      },
      "lineNbr": 375,
      "author": {
        "id": 1126884
      },
      "writtenOn": "2017-08-17T12:37:02Z",
      "side": 1,
      "message": "Here and elsewhere: place these fields in the same order as in the spec\nhttp://rawgit.com/w3c/webrtc-stats/master/webrtc-stats.html#dom-rtcmediastreamtrackstats",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "80b213f1_d5d715f5",
        "filename": "webrtc/stats/rtcstats_objects.cc",
        "patchSetId": 2
      },
      "lineNbr": 375,
      "author": {
        "id": 1228509
      },
      "writtenOn": "2017-08-17T20:53:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "03272744_4dd6acce",
      "revId": "b6b05f732fedda0b5861ddd37974d80bb53bd1b2",
      "serverId": "3ce6091f-6c88-37e8-8c75-72f92ae8dfba",
      "unresolved": false
    }
  ]
}